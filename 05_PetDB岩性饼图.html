<!DOCTYPE html>
<html lang="en" style="height: 100%">

<head>
  <meta charset="utf-8" />
</head>

<body style="height: 100%; margin: 0">
  <div id="container" style="height: 100%;width: 24cm; margin:0 auto;"></div>

  <script type="text/javascript" src="./asset/js/echarts.min.js"></script>

  <script type="text/javascript">
    var dom = document.getElementById("container");
    var myChart = echarts.init(dom, 'null', {
      renderer: "canvas",
      // renderer: "svg",
      useDirtyRect: false,
    });
    var app = {};

    var option;

    option = {
      // 所用数据集
      dataset: [
        {
          source: [
            ['Name', 'Value'],
            ['Adakite', 1],
            ['Alkali Basalt', 331],
            ['Alnoite', 2],
            ['Amphibolite', 6],
            ['Andesite', 284],
            ['Ankaramite', 16],
            ['Basalt(玄武岩)', 6749],
            ['Basaltic Andesite', 197],
            ['Basanite', 123],
            ['Benmoreite', 6],
            ['Boninite', 25],
            ['Breccia', 56],
            ['Carbonatite', 8],
            ['Clinopyroxenite', 4],
            ['Composite', 2],
            ['Dacite', 70],
            ['Diabase', 39],
            ['Diorite', 10],
            ['Dolerite', 45],
            ['Dunite', 17],
            ['Eclogite', 25],
            ['Felsite', 1],
            ['Foidite', 7],
            ['Gabbro', 116],
            ['Gabbronorite', 14],
            ['Gneiss', 6],
            ['Granite', 15],
            ['Granodiorite', 1],
            ['Granulite', 113],
            ['Harzburgite', 37],
            ['Hawaiite', 44],
            ['Hornblendite', 6],
            ['Icelandite', 2],
            ['Ignimbrite', 2],
            ['Kimberlite', 6],
            ['Lamproite', 8],
            ['Lherzolite', 55],
            ['Melilitite', 6],
            ['Meta-Basalt', 3],
            ['Metagabbro', 15],
            ['Metamorphic', 2],
            ['Metasedimentary', 14],
            ['Mugearite', 26],
            ['Nephelin-Basalt', 5],
            ['Nephelinite', 15],
            ['Obsidian', 1],
            ['Orthopyroxenite', 4],
            ['Peridotite', 61],
            ['Phonolite', 73],
            ['Phonotephrite', 15],
            ['Picrite', 26],
            ['Pyroxenite', 36],
            ['Quartzite', 2],
            ['Rhyodacite', 10],
            ['Rhyolite', 56],
            ['Schist', 1],
            ['Sedimentary', 4],
            ['Serpentinite', 17],
            ['Syenite', 4],
            ['Tephra', 165],
            ['Tephri-Phonolite', 13],
            ['Tephrite', 24],
            ['Tholeiite', 485],
            ['Tonalite', 8],
            ['Trachyandesite', 55],
            ['Trachybasalt', 50],
            ['Trachydacite', 4],
            ['Trachyte', 83],
            ['Troctolite', 4],
            ['Trondhjemite', 2],
            ['Tuff', 22],
            ['Unknown', 577],
            ['Websterite', 24],
            ['Wehrlite', 7]
          ],
        },
        {
          transform: {
            type: 'sort',
            // 按分数排序
            config: { dimension: 'Name', order: 'desc' }
          }
        },
        {
          transform: {
            type: 'sort',
            // 按分数排序
            config: { dimension: 'Name', order: 'asc' }
          }
        },
      ],
      // 工具箱
      toolbox: {
        show: true,
        feature: {
          mark: { show: true },
          dataView: { show: true, readOnly: false },
          restore: { show: true },
          saveAsImage: {
            show: true,
            pixelRatio: 10,
            backgroundColor: "rgba(0,0,0,0)",
          },
        },
      },
      // 标题
      title: {
        show: false,
        text: "05_PetDB岩性饼图",
        subtext: '',
        left: "center",
        textStyle: {
          // fontSize: 30,
          fontFamily: "'Times New Roman','宋体'",
        },
      },
      // 提示框
      tooltip: {
        trigger: "item",
        type: "line",
        formatter: "{c} ({d}%) ",
        textStyle: {
          fontFamily: "'Times New Roman','宋体'",
        },
      },
      // 图例
      legend: {
        // show: false,
        type: "scroll",
        orient: "vertical",
        top: 'center',
        left: 20,
        height: '94%',
        textStyle: {
          fontSize: 18,
          fontFamily: "'Times New Roman','宋体'",
          textBorderColor: "rgba(255, 255, 255, 1)",
          textBorderWidth: 2,
          textBorderType: 'solid',
        },
        datasetIndex: 0,
      },
      // 数据系列
      series: [
        {
          name: '岩性类型',
          type: "pie",
          radius: "55%",
          top: '4%',
          left: '20%',
          // 数据标签（引导线）
          label: {
            position: "outer",
            alignTo: "none",
            formatter: "{b}:{d}% ",
            bleedMargin: 5,
            textStyle: {
              fontSize: 16,
              fontFamily: "'Times New Roman','宋体'",
            },
          },
          // 选中强调效果
          emphasis: {
            itemStyle: {
              shadowBlur: 16,
              shadowOffsetX: 1,
              shadowColor: "rgba(0, 0, 0, 0.6)",
            },
          },
          // 调用数据集的哪个成果
          datasetIndex: 2,
        },
      ],
    };

    if (option && typeof option === "object") {
      myChart.setOption(option);
    }
    window.addEventListener("resize", myChart.resize);

  </script>
</body>

</html>